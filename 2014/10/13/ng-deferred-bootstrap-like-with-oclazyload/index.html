
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Charandas Batra-Daitch">
    <title>Use $ocLazyLoad to achieve your own angular-deferred-bootstrap - Charandas Batra-Daitch</title>
    <meta name="author" content="Charandas Batra-Daitch">
    
    
        <link rel="alternative" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <meta name="description" content="futureStates.addResolve with $ocLazyLoad for eager loading">
<meta property="og:type" content="blog">
<meta property="og:title" content="Use $ocLazyLoad to achieve your own angular-deferred-bootstrap">
<meta property="og:url" content="http://infinitecaus.es/2014/10/13/ng-deferred-bootstrap-like-with-oclazyload/index.html">
<meta property="og:site_name" content="Charandas Batra-Daitch">
<meta property="og:description" content="futureStates.addResolve with $ocLazyLoad for eager loading">
<meta property="og:updated_time" content="2015-09-04T22:35:25.567Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Use $ocLazyLoad to achieve your own angular-deferred-bootstrap">
<meta name="twitter:description" content="futureStates.addResolve with $ocLazyLoad for eager loading">
    
    
    
        <meta property="og:image" content="http://www.gravatar.com/avatar/511d6c5e91afae05e2f1468adca2fdd5?s=640"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style.min.css" type="text/css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-65637005-1']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

</head>

    <body>
        <div id="blog">
            <header id="header" data-behavior="3">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/ ">Charandas Batra-Daitch</a>
    </h1>
    
        <a class="header-right-picture" href="/#about">
            <img class="header-picture" src="http://www.gravatar.com/avatar/511d6c5e91afae05e2f1468adca2fdd5?s=90"/>
        </a>
    
</header>
            <nav id="sidebar" data-behavior="3">
    
        <div class="sidebar-profile">
            <a href="/#about">
                
                    <img class="sidebar-profile-picture" src="http://www.gravatar.com/avatar/511d6c5e91afae05e2f1468adca2fdd5?s=90"/>
                
            </a>
            <span class="sidebar-profile-name">Charandas Batra-Daitch</span>
        </div>
    
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/ "
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">Home</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/portfolio"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-paint-brush"></i>
                    <span class="sidebar-button-desc">Portfolio</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-tags"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">Tags</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-archives"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                    <span class="sidebar-button-desc">Archive</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link st-search-show-outputs"
                         href="/#search"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                    <span class="sidebar-button-desc">Search</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/#about"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                    <span class="sidebar-button-desc">About</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://github.com/charandas" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                    <span class="sidebar-button-desc">GitHub</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="http://careers.stackoverflow.com/charandas" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-stack-overflow"></i>
                    <span class="sidebar-button-desc">Stack Overflow</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://twitter.com/charandas108" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
                    <span class="sidebar-button-desc">Twitter</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://www.linkedin.com/in/charandas" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-linkedin"></i>
                    <span class="sidebar-button-desc">Linked In</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="mailto:charandas108@gmail.com" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                    <span class="sidebar-button-desc">Mail</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/atom.xml"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                    <span class="sidebar-button-desc">RSS</span>
                </a>
        </li>
        
    </ul>
    
</nav>

            
            <div id="main" data-behavior="3"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title" itemprop="headline">
            Use $ocLazyLoad to achieve your own angular-deferred-bootstrap
        </h1>
    
    <div class="post-meta">
    <time itemprop="datePublished" content="Mon Oct 13 2014 20:48:00 GMT-0400">
	
		    Oct 13, 2014
    	
    </time>
    
</div>
</div>
    
    <div class="post-content markdown" itemprop="articleBody">
        <div class="main-content-wrap">
            <p>A few days ago, it dawned on me that the full futureStates implemention as shown in my previous blog <a href="/2014/08/26/oclazyload-future-states/" title="post">post</a> was not needed by my app. I was okay with eagerly loading the JavaScript, however <a id="more"></a> I wanted to acheive two things, namely,</p>
<ol>
<li>Restrict what JavaScript I wanted to load in the entire lifecyle of an app. To me, it was pretty deterministic what I wanted to load or not depending on a remote JSON resource.</li>
<li>I wanted some abilitites of the package <a href="https://github.com/philippd/angular-deferred-bootstrap" target="_blank" rel="external">angular-deferred-bootstrap</a> but in a way that I didnâ€™t have replication of services and DI-injected resources that they fetched. I wanted these because <code>ui-router</code> would otherwise force me to<br>callout certain resolve-names needlessly. So for instance, if I have a <code>ListingService</code> that on app start, loads<br>a <code>listings.json</code> using a function <code>ListingService.getAll</code> and subsequently, I could make other calls to <code>LIstingService</code><br>such as <code>query</code> or <code>get</code>. So I did the <code>getAll</code> in the root state, and then proceeded to use the <code>ListingService</code> like so:<script src="//gist.github.com/charandas/c00c63a47a8f921773d0.js"></script>
If you notice, I would now be forced to couple the <code>allListings</code> resource with my use of <code>ListingService</code> to be able to guarantee that all listings have been fetched. The reasoning here lies in the fact that <code>ui-router</code> performs resolver<br>resolutions asynchronously. There is no concept of first doing it for the root states, and then the child states.</li>
</ol>
<h2 id="How_not_to_couple_the_services_to_their_resource_promise">How not to couple the services to their resource promise</h2><p>Lets get into our decoupled implemenation. Looks very similar to the previous post with <code>futureStateProvider.futureState</code> calls stripped out. The <code>futureStateProvider.addResolve</code> is all what we need to delay <code>ui-router</code> routing.<br>Also, the <code>ListingService</code> would now need to be a provider since its being used with <code>futureStateProvider</code> in the appâ€™s<br>booting process. With it being a provider, you cannot have <code>$ngResource</code> in its code, however <code>$http</code> can serve you as well<br>hopefully.</p>
<script src="//gist.github.com/charandas/35b51979d7e1291ef34b.js"></script>
<h3 id="Why_name_our_example_module_raiiServicesExample">Why name our example module raiiServicesExample</h3><p>RAII stands for Resouce Allocation is Initialization. Thanks to my first boss for mentoring in those early years, these acronyms mean a ton and come handy. This is another description for what we have now in <code>ListingService</code> when the app has finished loading.</p>

            
                

            
        </div>
    </div>
    <div class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/RAII/">RAII</a> <a class="tag tag--primary tag--small t-link" href="/tags/angular-deferred-bootstrap/">angular-deferred-bootstrap</a> <a class="tag tag--primary tag--small t-link" href="/tags/ng-deferred-bootstrap/">ng-deferred-bootstrap</a> <a class="tag tag--primary tag--small t-link" href="/tags/non-future-states/">non-future states</a> <a class="tag tag--primary tag--small t-link" href="/tags/ocLazyload/">ocLazyload</a> <a class="tag tag--primary tag--small t-link" href="/tags/requirejs/">requirejs</a> <a class="tag tag--primary tag--small t-link" href="/tags/ui-router-extras/">ui-router-extras</a>

            </div>
        
        <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/06/24/subnet-sum-with-fixed-constituent-size/"  data-tooltip="Subnet Sum with Fixed Constituent Size">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2014/08/26/oclazyload-future-states/" data-tooltip="Lazy Loading ui-router states with ocLazyLoad and ui-router-extras futureStates">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://infinitecaus.es/2014/10/13/ng-deferred-bootstrap-like-with-oclazyload/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://infinitecaus.es/2014/10/13/ng-deferred-bootstrap-like-with-oclazyload/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://infinitecaus.es/2014/10/13/ng-deferred-bootstrap-like-with-oclazyload/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


        
            <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2015 Charandas Batra-Daitch. All Rights Reserved. The blog cover that pops up on clicking "About" is adapted from Dustin O'Halloran's Piano Solos. If you don't know about the composer and are into minimalist compositions, head on to <a href="https://play.spotify.com/artist/6UEYawMcp2M4JFoXVOtZEq">Spotify</a>.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="3">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/06/24/subnet-sum-with-fixed-constituent-size/"  data-tooltip="Subnet Sum with Fixed Constituent Size">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2014/08/26/oclazyload-future-states/" data-tooltip="Lazy Loading ui-router states with ocLazyLoad and ui-router-extras futureStates">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://infinitecaus.es/2014/10/13/ng-deferred-bootstrap-like-with-oclazyload/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://infinitecaus.es/2014/10/13/ng-deferred-bootstrap-like-with-oclazyload/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://infinitecaus.es/2014/10/13/ng-deferred-bootstrap-like-with-oclazyload/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="3">
    <ul class="share-options">
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=http://infinitecaus.es/2014/10/13/ng-deferred-bootstrap-like-with-oclazyload/">
                <i class="fa fa-google-plus"></i><span class="">Share on Google Plus</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://infinitecaus.es/2014/10/13/ng-deferred-bootstrap-like-with-oclazyload/">
                <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http://infinitecaus.es/2014/10/13/ng-deferred-bootstrap-like-with-oclazyload/">
                <i class="fa fa-twitter"></i><span>Share on Twitter</span>
            </a>
        </li>
    </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
            
        </div>
        <div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="http://www.gravatar.com/avatar/511d6c5e91afae05e2f1468adca2fdd5?s=110"/>
        
            <h4 id="about-card-name">Charandas Batra-Daitch</h4>
        
            <h5 id="about-card-bio"><p>I am Charandas, a developer, generalist and hacker originally from India, now based in the US. I am passionate about building mobile and web apps that challenge the problems of data and scale. I blog about technology here and my projects on github might be of your interest.</p>
</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Digital Nomad</p>

            </h5>
        
        
    </div>
</div>

        <div id="cover" style="background-image:url('http://res.cloudinary.com/city-corridor/image/upload/v1441416927/blog-cover_p8angk.png');"></div>
    </body>
    <!--SCRIPTS-->
<script src="/assets/js/script.min.js" type="text/javascript"></script>
<!--SCRIPTS END-->

    <script type="text/javascript">
        var disqus_shortname = 'bardo-io';
        (function() {
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>


    <script type="text/javascript">
        (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
                (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
            e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
        })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

        _st('install','XhCY2sTfBsiptpAqE5PP','2.0.0');
    </script>


</html>
